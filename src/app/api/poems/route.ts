import { NextResponse } from "next/server";
import fs from "fs";
import path from "path";

export const dynamic = "force-static";
export const revalidate = 3600; // Revalidate every hour

interface Poem {
  id: string;
  title: string;
  author: string;
  content: string;
}

let cachedPoems: Poem[] | null = null;

function loadPoemsFromFile(): Poem[] {
  try {
    // Try to load from public/poems-data.json
    const filePath = path.join(process.cwd(), "public/poems-data.json");
    if (fs.existsSync(filePath)) {
      const fileContent = fs.readFileSync(filePath, "utf-8");
      const loadedPoems = JSON.parse(fileContent);
      if (Array.isArray(loadedPoems)) {
        cachedPoems = loadedPoems;
        return loadedPoems;
      }
    }
  } catch (error) {
    console.log("Could not load from poems-data.json, using fallback");
  }

  // Fallback poem
  return [
    {
      id: "pariyon-ka-shehzada",
      title: "परियों का है यह शहजादा",
      author: "जग ग्वालियरी",
      content: `परियों का है यह शहजादा, परी लोक से आया है।
परी लोक से आकर इसने, सबका मन हर्षाया है।।

पीयु हर्षिका का भाई यह, माँ की आँखों का तारा।
राजदुलारा है पापा का, कितना सुंदर अति प्यारा।।
ताई कहती नभ से उतरा, ताऊ कहे सितारा है।
शुभ आशीष दिया दादी ने, बही प्रेम की धारा है।।

भक्ति भाव से दादाजी ने, मंगल गीत सुनाया है।
परियों का है यह शहजादा, परी लोक से आया है।

मामू मासी मौसा प्यारे, कहते बड़ा सयाना है।
खुश होकर के झूमे नानी, साथ थिरकते नाना है।।
ढोल बजें घर के आँगन में, गूँजे हँसी तराना है।
रौनक छाई कोने-कोने, पावन दिवस सुहाना है।।

राजा बेटा प्यारा आया, मन मधुवन मुसकाया है।
परियों का है यह शहजादा, परी लोक से आया है।

बहिनों ने अपने आँगन में, सुख का दीप जलाया है।
उसके आने से घर भर में, शुभ उजियारा छाया है।।
सपनों में देखा जो कुछ भी, अवितथ बनकर आया है
खुशियों की सौगात लिए यह, सबके मन को भाया है।

कान्हा बनकर घर में आया, देखो रास रचाया है।।
परियों का है यह शहजादा, परी लोक से आया है।

मौलिक और स्वरचित
जगदीश गोकलानी — जग ग्वालियरी`,
    },{
    "id": "banvari-tujhko-kahuun",
    "title": "बनवारी तुझको कहूँ",
    "author": "जग ग्वालियरी",
    "content": "बनवारी तुझको कहूँ, कृष्ण कहूँ घनश्याम।\nजितना सुन्दर रूप है, उतने सुन्दर नाम।।\n\nउतने सुन्दर नाम, भक्ति से मन भर देते।\nतेरे खेल विचित्र, मोह सबको ही लेते।।।\n\nकहते कवि जगराज, कृष्ण की लीला न्यारी।\nरचता स्वांग अनेक, मदन मोहन बनवारी।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },{
    "id": "karm-chalenge-saath-mein",
    "title": "कर्म चलेंगे साथ में",
    "author": "जग ग्वालियरी",
    "content": "कर्म चलेंगे साथ में, और नहीं कुछ साथ।\nसब कुछ प्रभु के हाथ है, कुछ न मनुज के हाथ।\n\nकुछ न मनुज के हाथ, नहीं वश उसका चलता।\nकरने वाला ईश, सभी कुछ वह है करता।।\n\nकहते कवि जगराज, राह में नाग डसेंगे।\nजाएगा सब छूट, साथ में कर्म चलेंगे।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "jag-ki-ukti-vakt",
    "title": "जग की उक्ति - वक्त",
    "author": "जग ग्वालियरी",
    "content": "चलता रहता वक्त है, अपनी ही रफ्तार।\nभीख रहम की वक्त से, माँग नहीं तू यार।।\n\nमाँग नहीं तू यार, आज कर जो कल करना।\nबुरी बला आलस्य, नहीं इससे तुम डरना।।\n\nकहते कवि जगराज, वक्त से जो है लड़ता।\nवही जीतता जंग, वक्त उसके संँग चलता।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "likna-sunna-aaj-tum",
    "title": "लिखना सुनना आज तुम",
    "author": "जग ग्वालियरी",
    "content": "लिखना सुनना आज तुम, रुचिकर छंद महान।\nकुंडलियां के शुभ दिवस, बढ़े छंद का मान।।\n\nबढ़े छंद का मान, हृदय में ज्योति जगाना।\nकैसा लगता छंद, भाव मन के बतलाना।।\n\nकहते कवि जगराज, छंद प्यारा है इतना।\nजिसको लगता चाव, कहे वह मुझको लिखना।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "kar-le-prabhu-ka-gaan",
    "title": "कर ले प्रभु का गान",
    "author": "जग ग्वालियरी",
    "content": "कर ले प्रभु का गान रे, कर ले प्रभु का गान।\nऊँची होगी शान रे, ऊँचा तेरा मान।।\n\nऊँचा तेरा मान, स्मरण प्रभु का नित करना।\nकरना उसका ध्यान, ज्ञान को मन में भरना।।\n\nकहते कवि जगराज, हृदय में श्रद्धा भर ले।\nगँवा नहीं अब वक्त, ध्यान प्रभु जी का कर ले।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "shankar-bholenath",
    "title": "शंकर भोलेनाथ जी",
    "author": "जग ग्वालियरी",
    "content": "शंकर भोलेनाथ जी, इस जग के दातार।\nदर्शन मुझको दीजिए, आया तेरे द्वार।।\n\nआया तेरे द्वार, दुखों का भार मिटाना।\nएक तुम्हीं आधार, सुखों के फूल खिलाना।।\n\nशंकर सुनो पुकार, हटा लो पथ के कंकर।\nभव से कर दो पार, तार दो मुझको शंकर।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "jag-ki-ukti-main",
    "title": "जग की उक्ति - मैं",
    "author": "जग ग्वालियरी",
    "content": "जिसने भी है मैं कहा, गया उसी में डूब।\nमैं ही उसको खा गया, कहा किसी ने खूब।।\n\nकहा किसी ने खूब, गले क्यों इसे लगाया।\nमैं के एक निमित्त, हार रावण भी पाया।\n\nकहते कवि जगराज, लगे मैं मन में टिकने।\nउसने खाई मार, बिठाया मन में जिसने।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "kal-karna-kar-aaj",
    "title": "कल करना कर आज ले",
    "author": "जग ग्वालियरी",
    "content": "कल करना कर आज ले, यही सफलता मंत्र।\nअपने जीवन का अभी, बना इसे ले तंत्र।।\n\nबना इसे ले तंत्र, नहीं आलस में खोना।\nकल पर कभी न टाल, पड़ेगा वरना रोना।।\n\nनहीं हाथ पर हाथ, कहे 'जग' तुमको धरना।\nकरना कभी न देर, कह न, मुझको कल करना।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "ram-ratan-dhan-jaan",
    "title": "राम रतन धन जान",
    "author": "जग ग्वालियरी",
    "content": "हमें दिलाता प्रेम धन, राम नाम यशगान।\nपूँजी है सबसे बड़ी, राम रतन धन जान।।\n\nराम रतन धन जान, अमोलिक धन है होता।\nजीवन धन के बीज, राम खुद आकर बोता।।\n\nराम नाम आधार, सत्य की राह दिखाता।\nकरता बेड़ा पार, मोक्ष भी राम दिलाता।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "pavan-din-guruvar",
    "title": "पावन दिन गुरुवार का",
    "author": "जग ग्वालियरी",
    "content": "पावन दिन गुरुवार का, कृपा करे भगवान।\nशीश बृहस्पति देव को, झुका आज श्रीमान।।\n\nझुका आज श्रीमान, शरण में उसकी जाना।\nमिल जाएगा ज्ञान, हृदय में भक्ति जगाना।।\n\nकहते कवि जगराज, भजन कर अपने आँगन।\nबन जाएगा देख, सुहावन हर पल पावन।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "jeevan-anmol-hai",
    "title": "जीवन यह अनमोल है",
    "author": "जग ग्वालियरी",
    "content": "जीवन यह अनमोल है, लगा न सकते मोल।\nफँसकर मोह विलास में, करता टाल मटोल।।\n\nकरता टाल मटोल, दंभ में है भरमाता।\nदेख बुढ़ापा पास, व्यर्थ में शोर मचाता।।\n\nकहते कवि जगराज, शुद्ध कर अपना तन मन।\nमानव अब तो जाग, सफल कर ले यह जीवन।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "mangalkari-shubh-din",
    "title": "मंगलकारी शुभ दिवस",
    "author": "जग ग्वालियरी",
    "content": "मंगलकारी शुभ दिवस, अति ही मंगलवार।\nदिन है यह हनुमान का, आना उसके द्वार।।\n\nआना उसके द्वार, मुरादें पूर्ण करेगा।\nदेख माँगकर आज, झोलियाँ खूब भरेगा।।\n\nकहते कवि जगराज, राम की लीला न्यारी।\nभक्त बना हनुमान, सभी का मंगलकारी।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "puja-shiv-ki",
    "title": "पूजा शिव की",
    "author": "जग ग्वालियरी",
    "content": "पूजा शिव की जो करें, लेकर शिव का नाम।\nलेतें नित-नित नाम जो, पातें शिव का धाम।।\n\nपातें शिव का धाम, कटें जन्मों के बंधन।\nमिट जाते हैं पाप, मिटें मन की सब उलझन।।\n\nकहते कवि जगराज, नहीं शिव जैसा दूजा।\nकरने भर से ध्यान, सफल होती है पूजा।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "shubh-shubh-bol-tu",
    "title": "शुभ-शुभ ही बस बोल तू",
    "author": "जग ग्वालियरी",
    "content": "शुभ-शुभ ही बस बोल तू, शुभ ही जग में बोल।\nप्रभु ने तुझको है दिया, जीवन यह अनमोल।।\n\nजीवन यह अनमोल, लाज इसकी तुम रखना।\nकड़वा कभी न बोल, मान सबका ही करना।।\n\nकहते कवि जगराज, तेज कड़वा जाता चुभ।\nरखना इतना ध्यान, बोलना हरदम ही शुभ।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "parhit-karke-bhul-ja",
    "title": "परहित करके भूल जा",
    "author": "जग ग्वालियरी",
    "content": "परहित करके भूल जा, कभी न रखना याद।\nफल देगा ईश्वर तुझे, पूरी करे मुराद।।\n\nपूरी करे मुराद, हृदय में हर्ष भरेगा।\nसुख देगा भरपूर, झोलियाँ भर कर देगा।।\n\nकहते कवि जगराज, ध्यान कर उसका नित-नित।\nकहना उसका मान, सदा ही करना परहित।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "ishwar-man-mein",
    "title": "ईश्वर मन में है बसा",
    "author": "जग ग्वालियरी",
    "content": "ईश्वर मन में है बसा, उसमें भरे उजास।\nकभी न जाता दूर है, हरदम रहता पास।।\n\nहरदम रहता पास, सत्य की राह दिखाता।\nपूरी करता आस, ज्ञान का दीप जलाता।।\n\nकहते कवि जगराज, साथ देता खुद आकर।\nसारे जग का आधार, बसा कण-कण में ईश्वर।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  },
  {
    "id": "rachna-prabhu-ki",
    "title": "रचना प्रभु जी की रची",
    "author": "जग ग्वालियरी",
    "content": "रचना प्रभु जी की रची, अति ही सुंदर खास।\nगुल में भरे सुवास प्रभु, सब में उसका वास।।\n\nसब में उसका वास, उसी ने सृष्टि रचाई।\nधरती, जल, आकाश, उसी की देह बनाई।।\n\nकहते कवि जगराज, आदमी समझे अपना।\nसमझ मूर्ख नादान, सभी कुछ प्रभु की रचना।।\n\nजगदीश गोकलानी — जग ग्वालियरी"
  }
  ];
}

export async function GET() {
  const poems = cachedPoems || loadPoemsFromFile();
  return NextResponse.json(poems);
}
